###########################
署名生成手順
###########################

アルカナトークンを生成するにあたり、Validator(ゲームシステム側)が持つEGGトークンを、ユーザがアルカナに変換することを許可する必要がある。
また、このときゲームの結果値をアルカナトークンに埋め込むため、この値を改竄されずにトークンに書き込む必要がある。
これを行うために、ゲームサイドで署名を作成し、その署名を使ってユーザがトランザクションを送信するという手順を行う。

この署名付き転送許諾の処理フローの実行手順を解説する。


------------------------------------------------------------------------------------

処理フロー
===================================

* 署名対象データの作成
* EGG保有者による署名作成

------------------------------------------------------------------------------------

署名対象データの作成
===================================

署名対象データを作成するには、下記のデータが必要。

* toAddr : アルカナ生成先のアドレス（EGGの開封許諾を与える相手）
* eggid : 対象のEgg トークンのID
* seed : ゲームの結果値 

上記データを元に、以下の手順で署名対象データ:dataToBeSigned を作成する。::

    const ethabi = require('ethereumjs-abi');

    const dataToBeSigned = ethabi.soliditySHA3(["uint256", "address", "uint256"],
                                               [eggId, toAddr, seed]);

------------------------------------------------------------------------------------

署名の作成
===================================

署名を作成するには下記のデータが必要。

* dataToBeSigned : 署名対象データ
* privateKey : 署名者（トークン所有者）のプライベートキー

上記データを元に、以下の手順で署名:signForApproval を作成する。::


    const ethutil = require('ethereumjs-util');

    const {v, r, s} = ethutil.ecsign(dataToBeSigned, ethutil.toBuffer(privateKey));
    const signForApproval = ethutil.toRpcSig(v, r, s);


